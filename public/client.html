<!DOCTYPE html>
<html>
<head>
  <title>TiMS Client Interface</title>
</head>

<body>
  <div id="iframeContainer">
    <iframe id="displayFrame"
        src=""
        width="100%"
        height="100%"
        frameBorder="0"
        style="
          position: fixed;
          top: 0px;
          bottom: 0px;
          right: 0px;
          width: 100%;
          border: none;
          margin: 0;
          padding: 0;
          overflow: hidden;
          z-index: 999999;
          height: 100%;">
    </iframe>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    socket.on('connect', () => {
      const clientID = getQueryParam('id');
      const clientName = getQueryParam('name');
      if (clientID) {
        socket.emit('register', 'client', clientID, clientName || clientID);
      } else {
        alert('Missing client ID in URL! Example: ?id=client1');
      }
    });

    socket.on('updateURL', (url) => {
      const iframe = document.getElementById('displayFrame');
      iframe.src = url;
    });
  </script>
</body>
</html>
